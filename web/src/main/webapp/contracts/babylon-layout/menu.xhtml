<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ba="http://primefaces.org/babylon">
    <div class="layout-menu-container">
        <div class="layout-menu-logo">
            <h:link onclick="redirectHome()" styleClass="Hei100">
	        	<h:graphicImage library="imagenes" name="logo#{bbApplicationData.acercaDeClientNameFullTrim}.svg" 
	        		styleClass="logo"
	        		rendered="#{pathLogoApp eq null}" />
	       		<h:graphicImage value="#{pathLogoApp}" 
					styleClass="logo"
					rendered="#{pathLogoApp ne null}" />
            </h:link>
        </div>
        <div class="nano layout-menu-wrapper">
            <div class="nano-content sidebar-scroll-content">
				<h:form id="formMenuIzquierdo">
					<div class="layout-profile">
						<a class="layout-profile-button TexAlCenter" href="#">
							<div style="width:100%; text-align: center;">
							</div>
							<div class="layout-profile-userinfo">
								<span class="layout-profile-name">#{UserSession.usuario.fullName}</span>
							</div>
<!-- 							<i class="layout-profile-icon fa fa-angle-down"></i> -->
						</a>
						<ul class="layout-profile-menu">
						    <li>
						        <a onclick="redirectLogin()" href="javascript:void(null)">
						            <i class="fa fa-fw fa-sign-out"></i>
						            <span>#{msg.salir}</span>
						        </a>
						    </li>
						</ul>
					</div>
				    <ba:menu widgetVar="me">
						<p:menuitem action="/pages/cliente.faces?faces-redirect=true"
							value="#{msg.cliente}" />
				    </ba:menu>
				    <script>
						$(function(){
					        var $this = PF('me');
					        if($this) {
					            /* clear state */
					            $this.expandedMenuitems = [];
					            $this.deactivateItems($this.menu.find('li.active-menuitem'));
// 					            console.error($('.current-menu').parent().attr('id'));
					            $this.addMenuitem($('.current-menu').parent().attr('id'));
					            $this.restoreMenuState();
					            $('.active-route').removeClass('active-route');
					            $('.current-menu').addClass('active-route');
					        }
						});
				    </script>
				</h:form>
            </div>
        </div>
    </div>
    <h:form prependId="false">
        <p:remoteCommand name="redirectLogin" actionListener="#{bbUserData.redirectLogin()}" />
	</h:form>
</ui:composition>
